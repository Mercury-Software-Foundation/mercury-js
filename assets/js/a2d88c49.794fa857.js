"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6244],{7474:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>a,contentTitle:()=>i,default:()=>l,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var t=n(4848),r=n(8453);const s={sidebar_position:8,title:"Hooks"},i=void 0,c={id:"hook",title:"Hooks",description:"Mercury.js: Defining Hook Execution for Models and Actions",source:"@site/docs/hook.md",sourceDirName:".",slug:"/hook",permalink:"/mercury-js/docs/hook",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/hook.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{sidebar_position:8,title:"Hooks"},sidebar:"tutorialSidebar",previous:{title:"Model Options",permalink:"/mercury-js/docs/options"},next:{title:"Todo App with Next.js App Router and Mercury API",permalink:"/mercury-js/docs/Examples/todo-app"}},a={},d=[{value:"Mercury.js: Defining Hook Execution for Models and Actions",id:"mercuryjs-defining-hook-execution-for-models-and-actions",level:2},{value:"Hook Levels",id:"hook-levels",level:3},{value:"Hook Syntax:",id:"hook-syntax",level:3},{value:"Hook Actions",id:"hook-actions",level:3}];function h(e){const o={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h2,{id:"mercuryjs-defining-hook-execution-for-models-and-actions",children:"Mercury.js: Defining Hook Execution for Models and Actions"}),"\n",(0,t.jsx)(o.p,{children:"Mercury.js provides an advanced mechanism for adding before and after hooks to actions on your application's models. Hooks allow you to execute custom logic before or after certain operations, giving you granular control over the behavior of your data models."}),"\n",(0,t.jsx)(o.h3,{id:"hook-levels",children:"Hook Levels"}),"\n",(0,t.jsx)(o.p,{children:"Mercury.js hooks can be executed at different stages:"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"Before Hooks"})}),": Run before an action occurs on a model."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"After Hooks"})}),": Run after an action occurs on a model."]}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"Each model can have hooks attached to specific actions:"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"Create"})}),": Executed before or after creating a new record."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"Update"})}),": Executed before or after modifying an existing record."]}),"\n",(0,t.jsxs)(o.li,{children:[(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"Delete"})}),": Executed before or after removing an existing record."]}),"\n"]}),"\n",(0,t.jsx)(o.h3,{id:"hook-syntax",children:"Hook Syntax:"}),"\n",(0,t.jsxs)(o.p,{children:["To define hook, use the ",(0,t.jsx)(o.code,{children:"mercury.hook.before"})," and ",(0,t.jsx)(o.code,{children:"mercury.hook.after"}),"  methods."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-typescript",children:"// Define a before hook\nmercury.hook.before(action: string, handler: Function);\n\n// Define an after hook\nmercury.hook.after(action: string, handler: Function);\n"})}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.code,{children:"mercury.hook.before"})," and ",(0,t.jsx)(o.code,{children:"mercury.hook.after"})," are methods  which allows  you to specify custom logic for actions on a model."]}),"\n",(0,t.jsxs)(o.p,{children:["The   ",(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"action"})})," parameter is a string that represents the specific operation on a model to which the hook is attached."]}),"\n",(0,t.jsx)(o.h3,{id:"hook-actions",children:"Hook Actions"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:"For example"})}),': let\'s asssume DOCUMENT would be the model.\n"CREATE_DOCUMENT" will target the create operation of a document model. Each hook can be tied to different actions such as "CREATE", "UPDATE", or "DELETE" depending on the custom logic to run.']}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"1. Create Hook"})})})}),"\n",(0,t.jsx)(o.p,{children:"In this example, we add custom logic before and after creating a new document in the Document model."}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-typescript",children:'import mercury from "@mercury-js/core";\n// Define a before hook for the "create" action\nmercury.hook.before("CREATE_DOCUMENT", (params) => {\n  console.log("Before creating a document: ", params);\n});\n\n// Define an after hook for the "create" action\nmercury.hook.after("CREATE_DOCUMENT", (params, context) => {\n  console.log("After document creation: ", context);\n});\n'})}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:(0,t.jsxs)(o.strong,{children:["Defining a ",(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"before"})})})," Hook:"]})})}),"\n",(0,t.jsx)(o.p,{children:'A before hook is triggered before the "CREATE_DOCUMENT" action occurs.\nThe hook listens for this action and takes in a params argument, which likely contains data related to the document being created (such as its fields and values).\nThe hook then logs a message, displaying the params to provide insights into the document that is about to be created.'}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:"Purpose"})}),": This hook can be used to perform validations, modify parameters, or trigger additional logic before the document creation process begins."]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:(0,t.jsxs)(o.strong,{children:["Defining an ",(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"After"})})})," Hook:"]})})}),"\n",(0,t.jsx)(o.p,{children:'The after hook is triggered after the "CREATE_DOCUMENT" action has been completed.\nThis hook takes two arguments: params (same as the before hook, representing the document\'s data) and context, which likely contains additional information about the state or result after the document has been created.\nIt logs a message, displaying the context, which could include the document ID, any status information, or other metadata resulting from the creation.'}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:"Purpose"})}),": This hook can be used to execute tasks after the document creation, such as sending notifications, updating logs, or handling post-processing tasks."]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"2. Update Hook"})})})}),"\n",(0,t.jsx)(o.p,{children:"In this example, we add custom logic before and after updating a document  in the Document model."}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-typescript",children:'import mercury from "@mercury-js/core";\n// Define a before hook for the "update" action\nmercury.hook.before("UPDATE_DOCUMENT", (params) => {\n  console.log("Before updating a document: ", params);\n});\n\n// Define an after hook for the "update" action\nmercury.hook.after("UPDATE_DOCUMENT", (params, context) => {\n  console.log("After document updation: ", context);\n});\n'})}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:(0,t.jsxs)(o.strong,{children:["Defining a ",(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"Before"})})})," Hook:"]})})}),"\n",(0,t.jsx)(o.p,{children:'This before hook is triggered before the "UPDATE_DOCUMENT" action is executed.\nThe hook listens for the "UPDATE_DOCUMENT" event and accepts a params argument, which typically contains the data being passed for the update. This may include the document\'s ID, the fields to be updated, and the new values.\nThe hook logs a message showing the params, allowing you to inspect or modify the update request before it proceeds.'}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:"Purpose"})}),": The before hook allows you to perform pre-update tasks, such as validating the new data, checking permissions, or modifying the update request. For instance, you might want to ensure that certain fields meet specific conditions before allowing the update to proceed."]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"3. Delete Hook"})})})}),"\n",(0,t.jsx)(o.p,{children:"In this example, we add custom logic before and after deleting a document  in the Document model."}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-typescript",children:'import mercury from "@mercury-js/core";\n// Define a before hook for the "update" action\nmercury.hook.before("DELETE_DOCUMENT", (params) => {\n  console.log("Before deleting a document: ", params);\n});\n\n// Define an after hook for the "update" action\nmercury.hook.after("DELETE_DOCUMENT", (params, context) => {\n  console.log("After document deletion: ", context);\n});\n'})}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.em,{children:(0,t.jsxs)(o.strong,{children:["Defining a ",(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"Before"})})})," Hook:"]})})}),"\n",(0,t.jsx)(o.p,{children:'The before hook is triggered before the "DELETE_DOCUMENT" action is performed.\nThis hook listens for the "DELETE_DOCUMENT" event and takes a params argument, which likely contains the document\'s ID or relevant information about the document that is about to be deleted.\nThe hook logs a message showing the params, giving you insight into which document is about to be deleted and allowing you to perform checks or logic before deletion occurs.'}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:"Purpose"})}),": This hook allows you to execute logic before deleting the document, such as checking dependencies, performing validations, or preventing the deletion based on certain conditions (e.g., if the document is linked to other important records)."]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.em,{children:(0,t.jsxs)(o.strong,{children:["Defining an ",(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:(0,t.jsx)(o.code,{children:"After"})})})," Hook:"]})}),"\nThe after hook is triggered after the document has been deleted.\nThis hook takes two arguments:\nparams: The data associated with the deletion, typically containing information like the document ID or any related metadata.\ncontext: The context contains information about what happened during the delete operation, such as a success status, a confirmation of the deletion, or any other relevant details after the document is removed.\nThe hook logs the context to give visibility into the result of the delete operation."]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.em,{children:(0,t.jsx)(o.strong,{children:"Purpose"})}),": The after hook is used to execute logic after the document has been deleted, such as logging the deletion, updating related records, sending notifications, or cleaning up any associated data (e.g., removing references to the deleted document)."]})]})}function l(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>i,x:()=>c});var t=n(6540);const r={},s=t.createContext(r);function i(e){const o=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function c(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(s.Provider,{value:o},e.children)}}}]);